rm(list = ls())
gc()
library(data.table)
library(ggplot2)
library(dplyr)
library(arrow)
library(stringr)
library(scales)
library(lubridate)
# Choose the social
all_data <- setDT(NULL)
social_to_work_with <- c("voat")
social_unique_names <- social_to_work_with
n_bin <- 21
output_folder <- "data/Results/figure_1/"
for (social in social_to_work_with) {
setwd("/app/data/Labeled/Voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
message("Read: ", social)
# Unify column names
df <- unify_dataset_columns(df, social)
df <- df[!is.na(date)]
# Order the comments by date,time and topic
# Then apply linear binning
df <-
df[, .(topic,
root_submission,
date,
comment_id,
user,
toxicity_score)]
df <- df[order(topic, root_submission, date, ), ]
df[, lin_bin := sapply(.SD, linear_bin, n_bin),
by = .(root_submission, topic), .SDcols = "comment_id"]
}
setwd("/data/voat")
setwd("thesis/data/voat")
setwd("~/Documents/thesis/data/voat")
setwd("~/Documents/thesis/data/voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
library(data.table)
library(ggplot2)
library(dplyr)
library(arrow)
library(stringr)
library(scales)
library(lubridate)
install.packages('lubridate')
library(lubridate)
library(lubridate)
library(lubridate)
source("src/PRO/PRO_package/binning_functions.R")
setwd("~/Documents/thesis/")
source("src/PRO/PRO_package/binning_functions.R")
source("src/PRO/PRO_package/participation_and_regression_functions.R")
source("src/PRO/PRO_package/compute_CI.R")
source("src/PRO/PRO_package/unify_dataset_columns.R")
# Choose the social
all_data <- setDT(NULL)
social_to_work_with <- c("voat")
social_unique_names <- social_to_work_with
n_bin <- 21
output_folder <- "data/Results/figure_1/"
for (social in social_to_work_with) {
setwd("~/Documents/thesis/data/voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
message("Read: ", social)
# Unify column names
df <- unify_dataset_columns(df, social)
df <- df[!is.na(date)]
# Order the comments by date,time and topic
# Then apply linear binning
df <-
df[, .(topic,
root_submission,
date,
comment_id,
user,
toxicity_score)]
df <- df[order(topic, root_submission, date, ), ]
df[, lin_bin := sapply(.SD, linear_bin, n_bin),
by = .(root_submission, topic), .SDcols = "comment_id"]
}
library(arrow)
data <- read_parquet("voat_labeled_data_unified.parquet")
setwd("~/Documents/thesis/data/voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
install.packages('arrow')
rm(list = ls())
gc()
library(data.table)
library(ggplot2)
library(dplyr)
library(arrow)
library(stringr)
library(scales)
library(lubridate)
setwd("~/Documents/thesis/")
source("src/PRO/PRO_package/binning_functions.R")
source("src/PRO/PRO_package/participation_and_regression_functions.R")
source("src/PRO/PRO_package/compute_CI.R")
source("src/PRO/PRO_package/unify_dataset_columns.R")
# Choose the social
all_data <- setDT(NULL)
social_to_work_with <- c("voat")
social_unique_names <- social_to_work_with
n_bin <- 21
output_folder <- "data/Results/figure_1/"
for (social in social_to_work_with) {
setwd("~/Documents/thesis/data/voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
message("Read: ", social)
# Unify column names
df <- unify_dataset_columns(df, social)
df <- df[!is.na(date)]
# Order the comments by date,time and topic
# Then apply linear binning
df <-
df[, .(topic,
root_submission,
date,
comment_id,
user,
toxicity_score)]
df <- df[order(topic, root_submission, date, ), ]
df[, lin_bin := sapply(.SD, linear_bin, n_bin),
by = .(root_submission, topic), .SDcols = "comment_id"]
}
Sys.setenv(LIBARROW_MINIMAL = "false")
install.packages("arrow")
# Choose the social
all_data <- setDT(NULL)
library(data.table)
library(ggplot2)
library(dplyr)
library(arrow)
library(stringr)
library(scales)
library(lubridate)
setwd("~/Documents/thesis/")
source("src/PRO/PRO_package/binning_functions.R")
source("src/PRO/PRO_package/participation_and_regression_functions.R")
source("src/PRO/PRO_package/compute_CI.R")
source("src/PRO/PRO_package/unify_dataset_columns.R")
# Choose the social
all_data <- setDT(NULL)
social_to_work_with <- c("voat")
social_unique_names <- social_to_work_with
n_bin <- 21
output_folder <- "data/Results/figure_1/"
for (social in social_to_work_with) {
setwd("~/Documents/thesis/data/voat")
data <- read_parquet("voat_labeled_data_unified.parquet")
message("Read: ", social)
# Unify column names
df <- unify_dataset_columns(df, social)
df <- df[!is.na(date)]
# Order the comments by date,time and topic
# Then apply linear binning
df <-
df[, .(topic,
root_submission,
date,
comment_id,
user,
toxicity_score)]
df <- df[order(topic, root_submission, date, ), ]
df[, lin_bin := sapply(.SD, linear_bin, n_bin),
by = .(root_submission, topic), .SDcols = "comment_id"]
}
